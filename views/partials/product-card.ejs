<div class="product-card">
    <div class="image">
        <a href="/products/<%= product.slug %>">
            <% if (product.images && product.images.length > 0) { %>
                <img src="/uploads/products/<%= product.images[0] %>" alt="<%= product.name %>">
            <% } else { %>
                <img src="/images/no-image.png" alt="No Image Available">
            <% } %>
        </a>
        <!-- Quick Action Buttons -->
        <div class="product-quick-actions">
            <button class="btn-wishlist" 
                    data-product-id="<%= product._id %>" 
                    title="Thêm vào yêu thích">
                <i class="far fa-heart"></i>
            </button>
            <button class="btn-compare" 
                    data-product-id="<%= product._id %>" 
                    title="Thêm vào so sánh">
                <i class="fas fa-balance-scale"></i>
            </button>
            <button class="btn-quick-view" 
                    data-product-id="<%= product._id %>" 
                    title="Xem nhanh">
                <i class="fas fa-eye"></i>
            </button>
        </div>
        <!-- Discount Badge -->
        <% if (product.discountPrice && product.discountPrice < product.price) { %>
            <div class="discount-badge">
                -<%= Math.round((1 - product.discountPrice / product.price) * 100) %>%
            </div>
        <% } %>
        <!-- Stock Badge -->
        <% if (product.stock <= 0) { %>
            <div class="stock-badge out-of-stock">Hết hàng</div>
        <% } else if (product.stock <= 5) { %>
            <div class="stock-badge low-stock">Còn <%= product.stock %></div>
        <% } %>
    </div>
    
    <div class="content">
        <a href="/products/<%= product.slug %>">
            <h3><%= product.name %></h3>
            
            <div class="price">
                <% if (product.discountPrice) { %>
                    <span class="discount-price"><%= product.discountPrice.toLocaleString('vi-VN') %> ₫</span>
                    <span class="original-price"><%= product.price.toLocaleString('vi-VN') %> ₫</span>
                <% } else { %>
                    <%= product.price.toLocaleString('vi-VN') %> ₫
                <% } %>
            </div>
            
            <div class="rating">
                <% for (let i = 1; i <= 5; i++) { %>
                    <% if (i <= Math.round(product.averageRating)) { %>
                        <i class="fas fa-star"></i>
                    <% } else { %>
                        <i class="far fa-star"></i>
                    <% } %>
                <% } %>
                (<%= product.ratings.length %>)
            </div>
        </a>
        
        <div class="actions">
            <% if (product.stock > 0) { %>
                <button class="btn btn-primary add-to-cart" data-id="<%= product._id %>">
                    <i class="fas fa-shopping-cart"></i> Thêm vào giỏ
                </button>
            <% } else { %>
                <button class="btn btn-secondary" disabled>
                    <i class="fas fa-times"></i> Hết hàng
                </button>
            <% } %>
            <a href="/products/<%= product.slug %>" class="btn btn-outline-secondary">
                <i class="fas fa-info-circle"></i> Chi tiết
            </a>
        </div>
    </div>
</div>
