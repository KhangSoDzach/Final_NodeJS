# SourceComputer E-commerce - Plan ToDo
# So sÃ¡nh vá»›i cÃ¡c trang e-commerce quá»‘c táº¿ (Amazon, Shopee, Lazada, Newegg...)
# Cáº­p nháº­t: December 21, 2025

================================================================================
## ğŸ› BUGS & LOGIC ISSUES - Lá»–I Cáº¦N Sá»¬A NGAY (Tester Report)
================================================================================

### BUG-001: Order Model thiáº¿u field paymentStatus âœ… FIXED
- File: models/order.js
- Váº¥n Ä‘á»: View admin/orders/detail.ejs vÃ  controllers/user.js sá»­ dá»¥ng 
  `order.paymentStatus` nhÆ°ng Order model KHÃ”NG cÃ³ field nÃ y
- Háº­u quáº£: Hiá»ƒn thá»‹ undefined, logic kiá»ƒm tra coupon khi cancel sai
- Fix: âœ… ÄÃ£ thÃªm paymentStatus vÃ o Order model vá»›i enum ['pending', 'paid', 'failed', 'refunded']

### BUG-002: KhÃ´ng hoÃ n tráº£ tá»“n kho khi há»§y Ä‘Æ¡n hÃ ng âœ… FIXED
- File: controllers/user.js (cancelOrder) vÃ  controllers/admin.js
- Váº¥n Ä‘á»: Khi user hoáº·c admin há»§y Ä‘Æ¡n hÃ ng, stock KHÃ”NG Ä‘Æ°á»£c hoÃ n tráº£
- Háº­u quáº£: Tá»“n kho bá»‹ giáº£m vÄ©nh viá»…n, sáº£n pháº©m háº¿t hÃ ng áº£o
- Fix: âœ… ÄÃ£ thÃªm logic hoÃ n tráº£ stock khi há»§y Ä‘Æ¡n (cáº£ variant vÃ  product chÃ­nh)

### BUG-003: KhÃ´ng hoÃ n tráº£ Loyalty Points khi há»§y Ä‘Æ¡n âœ… FIXED
- File: controllers/user.js (cancelOrder)
- Váº¥n Ä‘á»: Khi há»§y Ä‘Æ¡n hÃ ng, loyaltyPointsUsed KHÃ”NG Ä‘Æ°á»£c hoÃ n tráº£ cho user
- Háº­u quáº£: User máº¥t Ä‘iá»ƒm tÃ­ch lÅ©y Ä‘Ã£ dÃ¹ng
- Fix: âœ… ÄÃ£ thÃªm logic hoÃ n tráº£ loyaltyPoints khi há»§y Ä‘Æ¡n

### BUG-004: Coupon model thiáº¿u startDate vÃ  endDate âœ… FIXED
- File: models/coupon.js  
- Váº¥n Ä‘á»: Admin controller postAddCoupon/postUpdateCoupon lÆ°u startDate/endDate
  nhÆ°ng Coupon schema KHÃ”NG cÃ³ cÃ¡c field nÃ y
- Háº­u quáº£: KhÃ´ng validate thá»i háº¡n coupon, coupon háº¿t háº¡n váº«n dÃ¹ng Ä‘Æ°á»£c
- Fix: âœ… ÄÃ£ thÃªm startDate, endDate vÃ o schema vÃ  validate trong applyCoupon

### BUG-005: Logic kiá»ƒm tra tá»“n kho variant khÃ´ng Ä‘á»“ng nháº¥t âœ… FIXED
- File: controllers/cart.js (addToCart)
- Váº¥n Ä‘á»: Chá»‰ kiá»ƒm tra stock cá»§a variant nhÆ°ng khÃ´ng kiá»ƒm tra tá»•ng stock product
- Háº­u quáº£: CÃ³ thá»ƒ thÃªm vÃ o giá» sá»‘ lÆ°á»£ng vÆ°á»£t quÃ¡ tá»“n kho thá»±c
- Fix: âœ… ÄÃ£ thÃªm kiá»ƒm tra cáº£ variant stock vÃ  product stock

### BUG-006: Duplicate code updateStock trong order.js âœ… FIXED
- File: controllers/order.js
- Váº¥n Ä‘á»: CÃ³ 2 function createOrder vÃ  postCheckout Ä‘á»u trá»« stock
  Náº¿u dÃ¹ng cáº£ 2 route sáº½ trá»« stock 2 láº§n
- Fix: âœ… ÄÃ£ deprecate createOrder, redirect vá» checkout page

### BUG-007: KhÃ´ng validate sá»‘ lÆ°á»£ng khi update cart âœ… FIXED
- File: controllers/cart.js (updateCart)
- Váº¥n Ä‘á»: KhÃ´ng kiá»ƒm tra sá»‘ lÆ°á»£ng má»›i cÃ³ vÆ°á»£t quÃ¡ tá»“n kho khÃ´ng
- Háº­u quáº£: User cÃ³ thá»ƒ update sá»‘ lÆ°á»£ng lá»›n hÆ¡n stock
- Fix: âœ… ÄÃ£ thÃªm validation stock trÆ°á»›c khi update

### BUG-008: Dashboard pendingOrders sai status âœ… FIXED
- File: controllers/admin.js (getDashboard)
- Váº¥n Ä‘á»: Query filter status = 'processing' nhÆ°ng Order chá»‰ cÃ³ 'pending'
  trong enum ['pending', 'confirmed', 'shipping', 'delivered', 'cancelled']
- Fix: âœ… ÄÃ£ Ä‘á»•i thÃ nh status = 'pending'

### BUG-009: User cÃ³ thá»ƒ review sáº£n pháº©m chÆ°a mua âœ… FIXED
- File: controllers/products.js (postAddReview)
- Váº¥n Ä‘á»: KhÃ´ng kiá»ƒm tra user Ä‘Ã£ mua sáº£n pháº©m chÆ°a
- Háº­u quáº£: Fake review, Ä‘Ã¡nh giÃ¡ khÃ´ng Ä‘Ã¡ng tin cáº­y
- Fix: âœ… ÄÃ£ thÃªm kiá»ƒm tra Order vá»›i status='delivered' trÆ°á»›c khi cho review

### BUG-010: Password validation yáº¿u âœ… FIXED
- File: routes/auth.js (postRegister)
- Váº¥n Ä‘á»: KhÃ´ng validate Ä‘á»™ máº¡nh máº­t kháº©u (Ä‘á»™ dÃ i, kÃ½ tá»± Ä‘áº·c biá»‡t...)
- Fix: âœ… YÃªu cáº§u Ã­t nháº¥t 8 kÃ½ tá»±, 1 chá»¯ hoa, 1 chá»¯ thÆ°á»ng, 1 sá»‘

### BUG-011: Role 'user' vs 'customer' khÃ´ng nháº¥t quÃ¡n âœ… FIXED
- File: models/user.js
- Váº¥n Ä‘á»: Schema cÃ³ enum ['user', 'admin', 'customer'] nhÆ°ng register táº¡o 'customer'
  cÃ²n updateUserRole chá»‰ accept ['customer', 'admin']
- Fix: âœ… ÄÃ£ thá»‘ng nháº¥t chá»‰ sá»­ dá»¥ng 'customer' vÃ  'admin'

### BUG-012: Image path khÃ´ng nháº¥t quÃ¡n âœ… FIXED
- File: controllers/admin.js (deleteProduct, postUpdateProduct)
- Váº¥n Ä‘á»: Delete image tá»« '../public/uploads/products' nhÆ°ng upload lÆ°u vÃ o 
  '/uploads/products' - cÃ³ thá»ƒ khÃ´ng Ä‘á»“ng bá»™
- Fix: âœ… ÄÃ£ kiá»ƒm tra cáº£ 2 Ä‘Æ°á»ng dáº«n khi xÃ³a image

================================================================================
## ÄÃƒ CÃ“ (âœ… COMPLETED) - Táº¥t cáº£ bugs Ä‘Ã£ Ä‘Æ°á»£c fix
================================================================================
[âœ…] Authentication (Login/Register/Forgot Password)
[âœ…] Google OAuth Integration
[âœ…] Product Management (CRUD)
[âœ…] Product Categories & Subcategories
[âœ…] Product Variants (RAM, SSD, Color...)
[âœ…] Product Specifications
[âœ…] Product Images (Multiple)
[âœ…] Product Ratings & Reviews (Chá»‰ cho phÃ©p review khi Ä‘Ã£ mua)
[âœ…] Shopping Cart (Session + User)
[âœ…] Order Management & Tracking
[âœ…] Order History
[âœ…] Coupon/Discount System (CÃ³ date validation)
[âœ…] Loyalty Points System (HoÃ n Ä‘iá»ƒm khi cancel)
[âœ…] User Profile Management
[âœ…] Multiple Shipping Addresses
[âœ…] Admin Dashboard
[âœ…] Admin Product/Order/User Management
[âœ…] Email Notifications (Order, Reset Password)
[âœ…] User Ban System
[âœ…] WebSocket Real-time Reviews
[âœ…] Search & Filter Products
[âœ…] Sort Products (Price, Name, Rating, Bestseller)
[âœ…] Pagination

================================================================================
## Cáº¦N LÃ€M - Æ¯U TIÃŠN CAO (ğŸ”´ HIGH PRIORITY)
================================================================================

### 1. PAYMENT INTEGRATION - TÃ­ch há»£p thanh toÃ¡n
[ ] TÃ­ch há»£p VNPay (Phá»• biáº¿n táº¡i Viá»‡t Nam)
[ ] TÃ­ch há»£p MoMo Wallet
[ ] TÃ­ch há»£p ZaloPay
[ ] TÃ­ch há»£p PayPal (Quá»‘c táº¿)
[ ] TÃ­ch há»£p Stripe (Quá»‘c táº¿)
[ ] COD (Cash on Delivery) - Thanh toÃ¡n khi nháº­n hÃ ng
[ ] Chuyá»ƒn khoáº£n ngÃ¢n hÃ ng (vá»›i QR Code)
[ ] Tráº£ gÃ³p 0% qua tháº» tÃ­n dá»¥ng

### 2. INVENTORY MANAGEMENT - Quáº£n lÃ½ kho hÃ ng âœ… COMPLETED
[âœ…] Cáº£nh bÃ¡o sáº£n pháº©m sáº¯p háº¿t hÃ ng (Low stock alerts)
[âœ…] Quáº£n lÃ½ nháº­p/xuáº¥t kho
[âœ…] Lá»‹ch sá»­ thay Ä‘á»•i tá»“n kho
[âœ…] Äáº·t hÃ ng trÆ°á»›c (Pre-order) cho sáº£n pháº©m háº¿t hÃ ng
[âœ…] ThÃ´ng bÃ¡o khi sáº£n pháº©m cÃ³ hÃ ng trá»Ÿ láº¡i (Back in stock notification)
[âœ…] Admin inventory dashboard vá»›i thá»‘ng kÃª
[âœ…] BÃ¡o cÃ¡o kho hÃ ng (Inventory report)
[âœ…] Äiá»u chá»‰nh tá»“n kho thá»§ cÃ´ng
[âœ…] Email thÃ´ng bÃ¡o cáº£nh bÃ¡o tá»“n kho tháº¥p cho admin

### 3. SHIPPING & DELIVERY - Váº­n chuyá»ƒn
[ ] TÃ­ch há»£p API GHTK (Giao HÃ ng Tiáº¿t Kiá»‡m)
[ ] TÃ­ch há»£p API GHN (Giao HÃ ng Nhanh)
[ ] TÃ­ch há»£p API Viettel Post
[ ] TÃ­nh phÃ­ ship tá»± Ä‘á»™ng theo Ä‘á»‹a chá»‰
[ ] Theo dÃµi Ä‘Æ¡n hÃ ng realtime (Tracking number)
[ ] Chá»n thá»i gian giao hÃ ng mong muá»‘n
[ ] Giao hÃ ng há»a tá»‘c (Express delivery)

### 4. SECURITY - Báº£o máº­t
[ ] Two-Factor Authentication (2FA)
[ ] CAPTCHA cho form Ä‘Äƒng nháº­p/Ä‘Äƒng kÃ½
[ ] Rate Limiting (Chá»‘ng brute force)
[ ] CSRF Protection
[ ] Input Sanitization (XSS Prevention)
[ ] SQL/NoSQL Injection Prevention
[ ] Audit Log (Ghi log hoáº¡t Ä‘á»™ng admin)
[ ] Session Management nÃ¢ng cao (ÄÄƒng xuáº¥t tá»« xa)

================================================================================
## Cáº¦N LÃ€M - Æ¯U TIÃŠN TRUNG BÃŒNH (ğŸŸ¡ MEDIUM PRIORITY)
================================================================================

### 5. PRODUCT FEATURES - TÃ­nh nÄƒng sáº£n pháº©m âœ… COMPLETED
[âœ…] So sÃ¡nh sáº£n pháº©m (Compare products) - Tá»‘i Ä‘a 4 SP cÃ¹ng danh má»¥c
[âœ…] Danh sÃ¡ch yÃªu thÃ­ch (Wishlist) - Theo dÃµi giÃ¡, thÃ´ng bÃ¡o giáº£m giÃ¡
[âœ…] Sáº£n pháº©m Ä‘Ã£ xem gáº§n Ä‘Ã¢y (Recently viewed) - LocalStorage
[âœ…] Q&A sáº£n pháº©m (Há»i Ä‘Ã¡p) - NgÆ°á»i dÃ¹ng há»i, admin/user tráº£ lá»i
[âœ…] Zoom áº£nh sáº£n pháº©m - Hover zoom, fullscreen view
[âœ…] Video review sáº£n pháº©m - Modal YouTube embed
[âœ…] HÃ¬nh áº£nh 360 Ä‘á»™ sáº£n pháº©m - Drag to rotate
[âœ…] Quick View Modal
[âœ…] Product Quick Actions (Wishlist/Compare/Quick View buttons)
[ ] Flash Sale / Deal sá»‘c
[ ] Combo sáº£n pháº©m (Bundle deals)
[ ] Sáº£n pháº©m hot/trending
[ ] Sáº£n pháº©m liÃªn quan/Gá»£i Ã½ (Related products)

### 6. USER FEATURES - TÃ­nh nÄƒng ngÆ°á»i dÃ¹ng
[ ] ÄÄƒng nháº­p báº±ng Facebook
[ ] LiÃªn káº¿t tÃ i khoáº£n máº¡ng xÃ£ há»™i
[ ] Upload avatar ngÆ°á»i dÃ¹ng
[ ] ThÃ´ng bÃ¡o Ä‘áº©y (Push notifications)
[ ] Notification Center (Trung tÃ¢m thÃ´ng bÃ¡o)
[ ] Lá»‹ch sá»­ Ä‘iá»ƒm thÆ°á»Ÿng chi tiáº¿t
[ ] VIP Member Tiers (Háº¡ng thÃ nh viÃªn)
[ ] Referral Program (Giá»›i thiá»‡u báº¡n bÃ¨)

### 7. SEARCH & FILTER - TÃ¬m kiáº¿m & Lá»c
[ ] TÃ¬m kiáº¿m gá»£i Ã½ (Autocomplete/Suggestions)
[ ] TÃ¬m kiáº¿m theo giá»ng nÃ³i (Voice search)
[ ] TÃ¬m kiáº¿m báº±ng hÃ¬nh áº£nh (Image search)
[ ] Lá»‹ch sá»­ tÃ¬m kiáº¿m
[ ] Bá»™ lá»c nÃ¢ng cao (Specs: RAM, CPU, GPU...)
[ ] Lá»c theo Ä‘Ã¡nh giÃ¡ (4 sao trá»Ÿ lÃªn...)
[ ] Lá»c theo tÃ¬nh tráº¡ng (CÃ²n hÃ ng, Háº¿t hÃ ng)
[ ] Lá»c theo khuyáº¿n mÃ£i/giáº£m giÃ¡
[ ] Elasticsearch integration (TÃ¬m kiáº¿m nhanh)

### 8. CHECKOUT OPTIMIZATION - Tá»‘i Æ°u thanh toÃ¡n
[ ] Guest Checkout (Mua khÃ´ng cáº§n Ä‘Äƒng kÃ½)
[ ] One-click Checkout (Mua nhanh)
[ ] Save payment methods
[ ] Auto-fill Ä‘á»‹a chá»‰
[ ] TÃ­nh thuáº¿ VAT tá»± Ä‘á»™ng
[ ] Xuáº¥t hÃ³a Ä‘Æ¡n VAT (Invoice)
[ ] Gift wrapping option (GÃ³i quÃ )
[ ] Gift card / Voucher

================================================================================
## Cáº¦N LÃ€M - Æ¯U TIÃŠN THáº¤P (ğŸŸ¢ LOW PRIORITY)
================================================================================

### 9. MARKETING & PROMOTIONS - Marketing
[ ] Email Marketing (Newsletter subscription)
[ ] Abandoned Cart Recovery (Email nháº¯c giá» hÃ ng bá» quÃªn)
[ ] SMS Marketing
[ ] Push Notification Campaigns
[ ] Popup khuyáº¿n mÃ£i
[ ] Banner quáº£ng cÃ¡o Ä‘á»™ng
[ ] SEO Optimization (Meta tags, Sitemap, Schema.org)
[ ] Social sharing buttons
[ ] Affiliate Program (ChÆ°Æ¡ng trÃ¬nh tiáº¿p thá»‹ liÃªn káº¿t)

### 10. ANALYTICS & REPORTING - PhÃ¢n tÃ­ch & BÃ¡o cÃ¡o
[ ] Dashboard thá»‘ng kÃª doanh thu
[ ] BÃ¡o cÃ¡o bÃ¡n hÃ ng theo thá»i gian
[ ] BÃ¡o cÃ¡o sáº£n pháº©m bÃ¡n cháº¡y
[ ] BÃ¡o cÃ¡o khÃ¡ch hÃ ng
[ ] TÃ­ch há»£p Google Analytics
[ ] TÃ­ch há»£p Facebook Pixel
[ ] Heatmap tracking
[ ] A/B Testing
[ ] Export bÃ¡o cÃ¡o (Excel, PDF)

### 11. CUSTOMER SERVICE - ChÄƒm sÃ³c khÃ¡ch hÃ ng
[ ] Live Chat Support (Tawk.to, Zendesk)
[ ] Chatbot AI há»— trá»£
[ ] Ticket Support System
[ ] FAQ/Help Center
[ ] Return/Refund Request System (Äá»•i tráº£)
[ ] Warranty Management (Quáº£n lÃ½ báº£o hÃ nh)
[ ] Kháº£o sÃ¡t Ä‘Ã¡nh giÃ¡ sau mua hÃ ng

### 12. MULTI-LANGUAGE & LOCALIZATION - Äa ngÃ´n ngá»¯
[ ] Há»— trá»£ Ä‘a ngÃ´n ngá»¯ (i18n)
[ ] Äa tiá»n tá»‡ (Multi-currency)
[ ] Äá»‹nh dáº¡ng ngÃ y thÃ¡ng theo locale
[ ] Äá»‹nh dáº¡ng sá»‘ theo locale

### 13. PERFORMANCE & SCALABILITY - Hiá»‡u suáº¥t
[ ] Image optimization (Lazy loading, WebP)
[ ] CDN Integration (CloudFlare, AWS CloudFront)
[ ] Redis Caching
[ ] Database Indexing Optimization
[ ] API Rate Limiting
[ ] Load Balancing
[ ] Microservices Architecture (TÃ¡ch nhá» services)

### 14. MOBILE & PWA âœ… COMPLETED
[âœ…] Responsive Design Optimization
[âœ…] Progressive Web App (PWA)
[âœ…] Deep linking
[âœ…] Offline mode support

### 15. ADMIN FEATURES - TÃ­nh nÄƒng Admin
[ ] Role-based Access Control (PhÃ¢n quyá»n chi tiáº¿t)
[ ] Bulk product import/export (CSV/Excel)
[ ] Bulk order processing
[ ] Inventory import tá»« supplier
[ ] CMS cho trang About, Terms, Policy
[ ] Blog/News management
[ ] Backup & Restore database
[ ] System health monitoring

================================================================================
## BUGS & IMPROVEMENTS - Sá»­a lá»—i & Cáº£i thiá»‡n
================================================================================
[ ] Unit Testing (Jest/Mocha)
[ ] Integration Testing
[ ] E2E Testing (Cypress/Playwright)
[ ] API Documentation (Swagger)
[ ] Error Logging (Winston, Sentry)
[ ] CI/CD Pipeline (GitHub Actions)
[ ] Code Review & Refactoring
[ ] Database Migration Scripts
[ ] Environment Configuration (.env templates)

================================================================================
## GHI CHÃš
================================================================================
- Æ¯u tiÃªn HIGH: Cáº§n thiáº¿t Ä‘á»ƒ website hoáº¡t Ä‘á»™ng nhÆ° e-commerce thá»±c thá»¥
- Æ¯u tiÃªn MEDIUM: NÃ¢ng cao tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng
- Æ¯u tiÃªn LOW: TÃ­nh nÄƒng nÃ¢ng cao, cÃ³ thá»ƒ lÃ m sau

- Tham kháº£o cÃ¡c trang: Amazon, Shopee, Lazada, Tiki, Tháº¿ Giá»›i Di Äá»™ng, 
  Phong VÅ©, Newegg, Best Buy

================================================================================
